# Flutter Localization Tools

Flutter/Dart ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å¤šè¨€èªåŒ–å¯¾å¿œã‚’æ”¯æ´ã™ã‚‹ãƒ„ãƒ¼ãƒ«é›†ã§ã™ã€‚

## æ¦‚è¦

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ã€Flutter ã‚¢ãƒ—ãƒªã®å›½éš›åŒ–ï¼ˆi18nï¼‰ã¨ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆl10nï¼‰ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã® 2 ã¤ã®ãƒ„ãƒ¼ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚æ—¥æœ¬èªãƒ»è‹±èªã® 2 è¨€èªå¯¾å¿œã‚’æƒ³å®šã—ãŸã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚

## ãƒ„ãƒ¼ãƒ«

### 1. æ—¥æœ¬èªãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰æ–‡å­—åˆ—æ¤œå‡ºãƒ„ãƒ¼ãƒ« (`find_japanese_hardcoded_strings.dart`)

Dart ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®æ—¥æœ¬èªã§ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’æ¤œå‡ºã—ã€å¤šè¨€èªåŒ–å¯¾å¿œãŒå¿…è¦ãªç®‡æ‰€ã‚’ç‰¹å®šã—ã¾ã™ã€‚

#### æ©Ÿèƒ½

- ã²ã‚‰ãŒãªã€ã‚«ã‚¿ã‚«ãƒŠã€æ¼¢å­—ã‚’å«ã‚€æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚’æ¤œå‡º
- ã‚³ãƒ¡ãƒ³ãƒˆå†…ã®æ—¥æœ¬èªã¯é™¤å¤–ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- `debugPrint`ã€`Exception`ã€å‡ºåŠ›æ–‡å†…ã®æ—¥æœ¬èªã¯é™¤å¤–
- æ—¢å­˜ã® ARB ãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹æ–‡å­—åˆ—ã¨ã®é‡è¤‡ã‚’ãƒã‚§ãƒƒã‚¯
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€è¡Œç•ªå·ã€è©²å½“ãƒ†ã‚­ã‚¹ãƒˆã‚’è©³ç´°è¡¨ç¤º

#### ä½¿ç”¨æ–¹æ³•

```bash
dart run tools/find_japanese_hardcoded_strings.dart
```

#### å®Ÿè¡Œä¾‹

```
ğŸ” æ—¥æœ¬èªãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰æ–‡å­—åˆ—æ¤œå‡ºãƒ„ãƒ¼ãƒ«ã‚’é–‹å§‹ã—ã¾ã™...

ğŸ¯ å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: lib

ğŸ“š æ—¢å­˜ã®l10næ–‡å­—åˆ—: 25ä»¶èª­ã¿è¾¼ã¿å®Œäº†

ğŸ“ å¯¾è±¡Dartãƒ•ã‚¡ã‚¤ãƒ«: 3ä»¶

ğŸ” æ¤œå‡ºçµæœ: 15ä»¶ã®æ—¥æœ¬èªæ–‡å­—åˆ—ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ

ğŸ“„ lib/samples/hardcoded_strings_sample.dart (12ä»¶)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”´ è¡Œ15: 'ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒª'
   title: const Text('ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒª'),

ğŸ”´ è¡Œ20: "ã“ã‚“ã«ã¡ã¯ã€ä¸–ç•Œï¼"
   const Text("ã“ã‚“ã«ã¡ã¯ã€ä¸–ç•Œï¼"),
```

### 2. ARB ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ¼æ¯”è¼ƒãƒ„ãƒ¼ãƒ« (`check_arb_keys.dart`)

è¤‡æ•°ã®è¨€èªã® ARB ãƒ•ã‚¡ã‚¤ãƒ«é–“ã§ã‚­ãƒ¼ã®æ•´åˆæ€§ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ç¿»è¨³ã®æ¼ã‚Œã‚’æ¤œå‡ºã—ã¾ã™ã€‚

#### æ©Ÿèƒ½

- 2 ã¤ã®è¨€èªï¼ˆè‹±èªã€æ—¥æœ¬èªï¼‰ã®ã‚­ãƒ¼ã‚’æ¯”è¼ƒ
- å„è¨€èªã§ä¸è¶³ã—ã¦ã„ã‚‹ã‚­ãƒ¼ã‚’ç‰¹å®š
- ä¸€éƒ¨ã®è¨€èªã«ã®ã¿å­˜åœ¨ã™ã‚‹ã‚­ãƒ¼ã‚’æ¤œå‡º
- è¨€èªå›ºæœ‰ã®ã‚­ãƒ¼ï¼ˆä»–ã®è¨€èªã«å­˜åœ¨ã—ãªã„ã‚­ãƒ¼ï¼‰ã‚’è¡¨ç¤º
- çµ±è¨ˆæƒ…å ±ã®è¡¨ç¤º

#### ä½¿ç”¨æ–¹æ³•

```bash
dart run tools/check_arb_keys.dart
```

#### å®Ÿè¡Œä¾‹

```
EN: 12 keys
JA: 12 keys

============================================================
Total unique keys: 14

============================================================
Missing keys by language:
============================================================

EN missing 2 keys:
  - missingInEnglish
  - onlyJapanese

JA missing 2 keys:
  - missingInJapanese
  - onlyEnglish
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
lib/
â”œâ”€â”€ l10n/                    # ARBãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå¤šè¨€èªãƒªã‚½ãƒ¼ã‚¹ï¼‰
â”‚   â”œâ”€â”€ app_en.arb          # è‹±èª
â”‚   â””â”€â”€ app_ja.arb          # æ—¥æœ¬èª
â”œâ”€â”€ samples/                 # ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ hardcoded_strings_sample.dart  # æ—¥æœ¬èªãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ä¾‹
â”‚   â””â”€â”€ mixed_content_sample.dart      # æ··åœ¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¾‹
â””â”€â”€ main.dart               # ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã®ãƒ¡ã‚¤ãƒ³
tools/
â”œâ”€â”€ find_japanese_hardcoded_strings.dart  # æ—¥æœ¬èªæ¤œå‡ºãƒ„ãƒ¼ãƒ«
â””â”€â”€ check_arb_keys.dart                   # ARBã‚­ãƒ¼æ¯”è¼ƒãƒ„ãƒ¼ãƒ«
```

## è¨­å®š

### æ—¥æœ¬èªæ¤œå‡ºãƒ„ãƒ¼ãƒ«ã®è¨­å®š

`find_japanese_hardcoded_strings.dart` å†…ã® `defaultConfig` ã§è¨­å®šã‚’å¤‰æ›´ã§ãã¾ã™ï¼š

```dart
const defaultConfig = JapaneseDetectorConfig(
  targetDirectories: ['lib/views'],    // æ¤œç´¢å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  excludePatterns: ['.g.dart'],        // é™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³
  excludeFiles: ['lib/l10n/'],         // é™¤å¤–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  includeComments: false,              // ã‚³ãƒ¡ãƒ³ãƒˆå†…ã‚‚æ¤œç´¢ã™ã‚‹ã‹
  l10nDirectory: 'lib/l10n',           // ARBãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
);
```

### ARB ã‚­ãƒ¼æ¯”è¼ƒãƒ„ãƒ¼ãƒ«ã®è¨­å®š

`check_arb_keys.dart` å†…ã® `files` ã§å¯¾è±¡è¨€èªã‚’å¤‰æ›´ã§ãã¾ã™ï¼š

```dart
final files = {
  'en': '$basePath/app_en.arb',
  'ja': '$basePath/app_ja.arb',
};
```

## ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã®å®Ÿè¡Œ

ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚€ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œã§ãã¾ã™ï¼š

```bash
flutter run
```

## å®Ÿéš›ã®ä½¿ç”¨ä¾‹

### CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã®ä½¿ç”¨

```yaml
# GitHub Actions example
- name: Check Japanese hardcoded strings
  run: dart run tools/find_japanese_hardcoded_strings.dart

- name: Check ARB key consistency
  run: dart run tools/check_arb_keys.dart
```

### ãƒ—ãƒ¬ã‚³ãƒŸãƒƒãƒˆãƒ•ãƒƒã‚¯ã§ã®ä½¿ç”¨

```bash
#!/bin/sh
# Pre-commit hook
dart run tools/find_japanese_hardcoded_strings.dart || exit 1
dart run tools/check_arb_keys.dart || exit 1
```

## è²¢çŒ®

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®è²¢çŒ®ã‚’æ­“è¿ã—ã¾ã™ï¼ä»¥ä¸‹ã®æ–¹æ³•ã§ã”å‚åŠ ãã ã•ã„ï¼š

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'feat: Add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## æŠ€è¡“è¨˜äº‹

ã“ã®ãƒ„ãƒ¼ãƒ«ã«é–¢ã™ã‚‹è©³ç´°ãªæŠ€è¡“è¨˜äº‹ã¯[ã“ã¡ã‚‰](ãƒªãƒ³ã‚¯ã‚’æŒ¿å…¥)ã‚’ã”è¦§ãã ã•ã„ã€‚

---

**Flutter Localization Tools** - Flutter ã‚¢ãƒ—ãƒªã®å¤šè¨€èªåŒ–ã‚’ã‚ˆã‚ŠåŠ¹ç‡çš„ã« ğŸŒ
